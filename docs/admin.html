<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>管理デモ（フロントのみ）</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>管理画面（モック）</h1>

  <button onclick="next()">次を呼出</button>
  <ul id="list"></ul>

  <script>
    let queue = JSON.parse(localStorage.getItem('queue') || '[]');
    function save() { localStorage.setItem('queue', JSON.stringify(queue)); }

    function render(){
      const ul = document.getElementById('list'); ul.innerHTML = '';
      queue.forEach(t => {
        const li = document.createElement('li');
        li.textContent = `番号 ${t.no} : ${t.name}`;
        ul.appendChild(li);
      });
    }

    function next(){
      const finished = queue.shift();
      if (finished) {
        alert(`呼出し：番号 ${finished.no} の方`);
        save(); render();
      } else {
        alert('待ち無し');
      }
    }

    /* 受付側で変化しているかもしれないので 5 秒ごとに同期 */
    setInterval(()=>{
      queue = JSON.parse(localStorage.getItem('queue') || '[]');
      render();
    }, 5000);

    render();
  </script>
</body>
</html>
